<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta
    keywords="Freedom of expression, real conversations, freedom of speech, chat free, free chat, politics, spirtituality, religion, arts, entertainment, conversation, smart people,
  be happy, pluralism, cosmopolitanism, cosmopolite, democrats, republicans, independents, independence, free speech, different people, meet, be with, find">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <link rel="stylesheet" href="/static/app.css">
  <link rel="stylesheet" href="/static/bootstrap.css">

  <link rel="icon" type="image/png" href="static/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="static/favicon-16x16.png" sizes="16x16" />

  <script src="https://unpkg.com/axios@0.19.0/dist/axios.js"></script>
  <script src="http://unpkg.com/babel-standalone"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css'>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://www.google.com/recaptcha/enterprise.js?render=6LeK_pwjAAAAAEu3ycWXYOJLfz4hF7MG2emkvIAt"></script>



  <title>{% block title %}THY TALK{% endblock %}</title>
</head>


<body>

  <div id="overlay" onclick="overlayOff()">
    <div id="OverlayText"></div>
  </div>


  <div class="container bg-light">
    <div class="row">
      <div class="col-xs-2 navbar-light bg-light" style="padding-left: 0px;  padding-right: 0px;">
        <a class="links" href="/" style>
          <img class="img-fluid" src="{{url_for('static', filename='logo.jpg')}}" />

        </a>
      </div>
      <div class="col-xs-10">

        <nav class="navbar navbar-expand-sm navbar-light static-top d-flex justify-content-end ">

          <!-- Collapse button -->
          <button class="navbar-toggler navbar-toggler-icon"
            style="width:45px;height:45px;position:relative;right:-50px;top:-20px" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"></button>


          <!-- Collapsible content -->
          <div class="collapse navbar-collapse" id="navbarSupportedContent" {%if
            request.MOBILE%}style="position:relative;top:-100px" {%endif%}>

            <ul class="navbar-nav mr-auto mt-2 mt-xs-0">
              <li class="nav-item"><a class="nav-link" href="/">HOME</a></li>
              {%if "user_id" in session %}
              <li class="nav-item"><a class="nav-link" href="/talk/signout">SIGN OUT</a></li>
              <li class="nav-item"><a class="nav-link" href="/talk/savedarticles">SAVED</a></li>
              {%else%}
              <li class="nav-item"><a class="nav-link" href="/talk/signup">SIGN UP</a></li>
              <li class="nav-item"><a class="nav-link" href="/talk/signin">SIGN IN</a></li>
              {%endif%}
              <!-- <form action="/talk" method="POST">
                                <button type="submit" class="btn btn-primary btn-xs btn-block"></button>
                            </form> -->
            </ul>

            {%if request.MOBILE%}
            <form class="form-inline my-2 my-xs-0" style="float:left">
              <input class="form-control" type="search" placeholder="Search" aria-label="Search" style="width:100px;">
              <button class="btn btn-primary bi bi-search" style="width:50px;display:inline-block"
                type="submit"></button>
            </form>
            {%else%}
            <form class="form-inline my-2 my-xs-0" style="float:right">
              <input class="form-control mr-xs-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-primary bi bi-search" type="submit"></button>

            </form>
            {%endif%}
          </div>
        </nav>
      </div>

      <!-- USERS (formerly 'side content') -->
      <!-- USERS LIST (NO MOBILE DEVICE) -->
      {%if not request.MOBILE%}
      <div class="container-fluid col-xs-2 sidenav">
        <nav id="sidebar">

          <ul class="list-unstyled components">
            <li class="active">
              <a class="links" href="#usersSubmenu" data-toggle="collapse" aria-expanded="false" id="subusermenu">USERS</a>
              <ul class="collapse" id="usersSubmenu">
                <li>


                  <!-- CURRENTLY LOGGED IN USER -->
                  {%if currentuser%}
                  <div class="row">
                    <div class="col-xs-4">
                      <h6>{{ currentuser.name }}</h6>
                    </div>
                  </div>
                  <div class="row">

                    <div class="col-xs-4">
                      <a {%if session['user_id']==currentuser.id%} href="/talk/{{ currentuser.id }}" {% else %} href="#"
                        {%endif%}>
                        {% if currentuser.img_url %}
                        <img src="{{currentuser.img_url}}" class="img-fluid" width="50px">
                        {%else%}
                        <img src="{{url_for('static', filename='logo.jpg')}}" class="img-fluid" width="50px" />
                        {% endif %}
                      </a>
                    </div>

                    <div class="col-xs-4">
                      <button type="submit" formaction="/talk/chat/{{currentuser.id}}" class="btn btn-primary btn-xs">
                        <span class="bi bi-chat"></span></span>
                      </button>
                    </div>
                    <div class="col-xs-4">
                      <form>
                        <button type="submit" formaction="/talk/edit/{{currentuser.id}}" class="btn btn-info btn-xs">
                          <span class="glyphicon glyphicon-edit"></span></span>
                        </button>
                      </form>
                    </div>

                  </div>
                  <hr>
                  {%endif%}


                  <!-- ALL OTHER USERS -->
                  {%if users%}

                  {% for user in users %}
                  {% if user != currentuser %}
                  <div class="row">
                    <div class="col-xs-4">
                      <h6>{{ user.name }}</h6>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xs-4">

                      <a {%if session["user_id"]==user.id%} href="/talk/{{ user.id }}" {% else %} href="#" {%endif%}>
                        {% if user.img_url %}
                        <img src="{{user.img_url}}" class="img-fluid" width="50px">
                        {%else%}
                        <img src="{{url_for('static', filename='logo.jpg')}}" class="img-fluid" width="50px" />
                        {% endif %}
                      </a>
                    </div>
                    <div class="col-xs-4">
                      <button type="submit" formaction="/talk/chat/{{user.id}}" class="btn btn-primary btn-xs">
                        <span class="bi bi-chat"></span></span>
                      </button>
                    </div>
                    {%if session["user_id"] == user.id%}
                    <div class="col-xs-4">
                      <form>
                        <button type="submit" formaction="/talk/edit/{{user.id}}" class="btn btn-info btn-xs">
                          <span class="glyphicon glyphicon-edit"></span></span>
                        </button>
                      </form>
                    </div>
                    {%endif%}
                    </form>
                  </div>
                  <br>
                  {%endif%}

                  {% endfor %}
                  {%endif%}


                </li>
              </ul>
            </li>

            <li>
              <a class="links" href="#savedArticlesSubmenu" data-toggle="collapse" aria-expanded="false">SAVED
                ARTICLES</a>
              <ul class="collapse" id="savedArticlesSubmenu">
                {%if saved_articles%}
                {%for saved_art in saved_articles%}
                <li>
                  <a class="links" href="{{saved_art.url}}" id="saved_article{{loop.index}}">{{saved_art.title}}</a>
                </li>
                <hr>
                {%endfor%}
                {%endif%}
              </ul>
          </ul>


        </nav>
      </div>
      <!-- USERS (MOBILE PLATFORMS) -->
      {%else%}

      <div class="container-fluid col-xs-2 sidenav left">

        <!-- CURRENTLY LOGGED IN USER -->
        {%if currentuser%}
        <div class="row">
          <div class="col-lg-2">
            <div class="row">

              <div style="font-size:xx-small">{{ currentuser.name }}</div>
              <a {%if session["user_id"]==currentuser.id%} href="/talk/{{ currentuser.id }}" {% else %} href="#"
                {%endif%}>
                {% if currentuser.img_url %}
                <img src="{{currentuser.img_url}}" class="img-fluid rounded mx-auto d-block">
                {%else%}
                <img src="{{url_for('static', filename='logo.jpg')}}" class="img-fluid" />
                {% endif %}
              </a>

            </div>
            <div class="row">

              <button type="submit" formaction="/talk/chat/{{currentuser.id}}" class="btn btn-info btn-xs bi bi-chat">
              </button>

              {%if session["user_id"] == currentuser.id%} {# a bit redundent but keep it out of extra precaution #}

              <form>
                <button type="submit" formaction="/talk/edit/{{currentuser.id}}"
                  class="btn btn-info btn-xs glyphicon glyphicon-edit">
                </button>
              </form>

              {%endif%}
              </form>
            </div>
          </div>
        </div>
        {%endif%}

        <!-- ALL OTHER USERS -->
        {%if users%}

        {% for user in users %}
        {% if user != currentuser %}
        <div class="row">
          <div class="col-lg-2">
            <div class="row">

              <div style="font-size:xx-small">{{ user.name }}</div>
              <a {%if session["user_id"]==user.id%} href="/talk/{{ user.id }}" {% else %} href="#" {%endif%}>
                {% if user.img_url %}
                <img src="{{user.img_url}}" class="img-fluid rounded mx-auto d-block">
                {%else%}
                <img src="{{url_for('static', filename='logo.jpg')}}" class="img-fluid" />
                {% endif %}
              </a>

            </div>
            <div class="row">

              <button type="submit" formaction="/talk/chat/{{user.id}}" class="btn btn-info btn-xs bi bi-chat">
              </button>

              </form>
            </div>
          </div>
        </div>
        <br>
        {%endif%}

        {% endfor %}
        {%endif%}

      </div>

      {%endif%}

      <!-- END USERS -->


      <!-- MAIN CONTENT -->
      {%if not
      request.MOBILE%}<!-- BEWARE OF SHIFTED INDENTATION DUE TO JINJA CONDITION HERE: THIS IS NOT AN ANOMALY! -->
      <div class="col-xs-6 center">
        
          {%else%}
          <div class="col-xs-10 center">
            <a class="messages" style="width:50%" href="#news_mobile">NEWS</a>
            <br>
            {%endif%}
            <div class="row">
            <!-- ***********************FLASH******************************** -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="container-fluid">
              <div class="row .row-height justify-content-center">
                <div class="col-xs-12" style="text-align: center;">

                  <ul>
                    {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li> {#categories are CSS classes to be styled in
                    app.css! #}
                    {% endfor %}
                  </ul>

                </div>
              </div>
            </div>
            {% endif %}
            {% endwith %}
            <!-- ***********************END OF FLASH******************************** -->
            <br>
          </div>
          <div class="row mt-5">
            {% block content %}{% endblock %}
          </div>
        </div>
        <!-- END OF MAIN CONTENT -->



        <!-- NEWS -->

        {%if articles%}


        <!-- SIDE CONTENT RIGHT (OR BOTTOM IF MOBILE PLATFORM)-->
        {%if request.MOBILE%}<!-- BEWARE OF SHIFTED INDENTATION DUE TO JINJA CONDITION HERE: THIS IS NOT AN ANOMALY! -->
        <div class="row" id="news_mobile" style="margin-top:10px; "><!-- NEW ROW IF MOBILE PLATFORM -->
          <div class="col-lg-fluid">
            {%else%}
            <div class="col-xs-4 sidenav right">
              {%endif%}

              <div class="card-fluid col-xs-12" style="padding-top:50px;"> <!-- ENTIRE NEWS SECTION -->

                <!-- HEADER NEWS CARD -->
                <div class="container-fluid">
                  <div class="row">
                    <!-- Featured image -->
                    <div class="bg-image col-xs-12">
                      <img src="{{articles[0]['image']}}" class="img-fluid" max-width="100%" />
                      <a class="links" href="#!">
                        <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                      </a>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 text-start">
                      <u> {{articles[0]['publishedAt']|trim('Z')|replace('T', ' ')}}</u>
                    </div>
                  </div>
                  <!-- Article title and description -->
                  <div class="row">
                    <div class="col-12 text-start">
                      <a class="links" href="{{articles[0]['url']}}" class="text-dark">
                        <h5><b>{{articles[0]['description']}}</b></h5>
                      </a>
                    </div>
                  </div>
                </div>



                <hr />

                <!-- SMALL NEWS CARDS -->

                {%for article in articles%}
                {%if article['title'] != articles[0]['title']%}
                <a class="links" href="" class="text-dark">
                  <div class="row mb-4 border-bottom pb-2">

                    <div class="col-6">
                      <img src="{{article['image']}}" class="img-fluid shadow-1-strong rounded"
                        alt="Hollywood Sign on The Hill" />
                    </div>

                    <div class="col-6">
                      <p class="h6"><a class="links"
                          href="{{article['url']}}"><strong>{{article['description']}}</a></strong></p>
                      <p>
                        <u>{{article['publishedAt']|trim('Z')|replace('T', ' ')}}</u>
                      </p>
                    </div>

                    <div class="col-6">
                      <button class="btn glyphicon glyphicon-save savearticle_cls" id="savearticle{{loop.index}}"
                        data-article-url="{{article['url']}}" data-article-title="{{article['title']}}"></button>
                    </div>
                  </div>
                </a>
                {%endif%}
                {%endfor%}


              </div>
              <!-- News block -->
            </div>
          </div>
          {%if request.MOBILE%} {# if mobile row, we have an extra <div></div> to close #}
        </div> <!-- end of conditional (mobile) row -->
      </div>
      {%endif%}
      {%endif%}
      <!-- END OF NEWS -->
      <!-- END OF SIDE CONTENT -->




    </div>
    {#
    {%if not request.MOBILE%}
    <footer style="background-color: #ffede7;">

      <div class="text p-12" style="background-color: rgba(239, 221, 221, 0.2);">
        <a style="color:grey" href="/">Â© 2022 Copyright: - elfege.com</a>
      </div>
    </footer>
    {%endif%}
    #}
  </div>

</body>
<script src="/static/app.js"></script>

</html>